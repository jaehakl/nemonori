import{j as e,r as b}from"./index-Dwc8S6Nr.js";import{c as E}from"./index-oiFZrnAu.js";const M=[{kanji:"お",kana:"お",hangul:"오"}],W=[{kanji:"春",kana:"はる",hangul:"하루"},{kanji:"夏",kana:"なつ",hangul:"나쓰"},{kanji:"秋",kana:"あき",hangul:"아키"},{kanji:"冬",kana:"ふゆ",hangul:"후유"},{kanji:"梅",kana:"うめ",hangul:"우메"},{kanji:"竹",kana:"たけ",hangul:"타케"},{kanji:"菊",kana:"きく",hangul:"기쿠"},{kanji:"咲",kana:"さき",hangul:"사키"},{kanji:"花",kana:"はな",hangul:"하나"},{kanji:"松",kana:"まつ",hangul:"마쓰"},{kanji:"初",kana:"はつ",hangul:"하쓰"},{kanji:"富",kana:"とみ",hangul:"토미"},{kanji:"福",kana:"ふく",hangul:"후쿠"},{kanji:"信",kana:"しん",hangul:"신"},{kanji:"寿",kana:"ひさ",hangul:"히사"},{kanji:"芳",kana:"よし",hangul:"요시"},{kanji:"光",kana:"みつ",hangul:"미쓰"},{kanji:"琴",kana:"こと",hangul:"코토"},{kanji:"園",kana:"その",hangul:"소노"},{kanji:"蓮",kana:"れん",hangul:"렌"},{kanji:"雪",kana:"ゆき",hangul:"유키"},{kanji:"桜",kana:"さくら",hangul:"사쿠라"},{kanji:"紅",kana:"べに",hangul:"베니"},{kanji:"綾",kana:"あや",hangul:"아야"},{kanji:"美",kana:"み",hangul:"미"},{kanji:"恵",kana:"めぐみ",hangul:"메구미"},{kanji:"椿",kana:"つばき",hangul:"쓰바키"},{kanji:"菖",kana:"あやめ",hangul:"아야메"},{kanji:"藤",kana:"ふじ",hangul:"후지"},{kanji:"萩",kana:"はぎ",hangul:"하기"},{kanji:"苑",kana:"えん",hangul:"엔"},{kanji:"瑞",kana:"みず",hangul:"미즈"},{kanji:"瑠",kana:"るり",hangul:"루리"},{kanji:"珠",kana:"たま",hangul:"타마"},{kanji:"玉",kana:"たま",hangul:"타마"},{kanji:"糸",kana:"いと",hangul:"이토"},{kanji:"絹",kana:"きぬ",hangul:"기누"},{kanji:"彩",kana:"あや",hangul:"아야"},{kanji:"舞",kana:"まい",hangul:"마이"},{kanji:"歌",kana:"うた",hangul:"우타"},{kanji:"詩",kana:"うた",hangul:"우타"}],A=[{kanji:"子",kana:"こ",hangul:"코"},{kanji:"江",kana:"え",hangul:"에"},{kanji:"代",kana:"よ",hangul:"요"},{kanji:"乃",kana:"の",hangul:"노"},{kanji:"香",kana:"か",hangul:"카"},{kanji:"恵",kana:"え",hangul:"에"},{kanji:"美",kana:"み",hangul:"미"},{kanji:"津",kana:"つ",hangul:"쓰"},{kanji:"音",kana:"ね",hangul:"네"},{kanji:"枝",kana:"え",hangul:"에"},{kanji:"世",kana:"よ",hangul:"요"},{kanji:"里",kana:"り",hangul:"리"},{kanji:"奈",kana:"な",hangul:"나"},{kanji:"加",kana:"か",hangul:"카"},{kanji:"女",kana:"め",hangul:"메"},{kanji:"姫",kana:"ひめ",hangul:"히메"},{kanji:"妙",kana:"たえ",hangul:"타에"},{kanji:"紀",kana:"のり",hangul:"노리"},{kanji:"瑠",kana:"る",hangul:"루"},{kanji:"珠",kana:"たま",hangul:"타마"},{kanji:"瑛",kana:"えい",hangul:"에이"},{kanji:"琴",kana:"こと",hangul:"코토"},{kanji:"鶴",kana:"つる",hangul:"쓰루"},{kanji:"鶯",kana:"うぐいす",hangul:"우구이스"}],D=[{kanji:"太",kana:"た",hangul:"타"},{kanji:"次",kana:"じ",hangul:"지"},{kanji:"三",kana:"さ",hangul:"사"},{kanji:"四",kana:"し",hangul:"시"},{kanji:"五",kana:"ご",hangul:"고"},{kanji:"六",kana:"ろく",hangul:"로쿠"},{kanji:"七",kana:"しち",hangul:"시치"},{kanji:"九",kana:"く",hangul:"쿠"},{kanji:"十",kana:"じゅう",hangul:"주"},{kanji:"兵",kana:"へい",hangul:"헤이"},{kanji:"吉",kana:"きち",hangul:"기치"},{kanji:"松",kana:"まつ",hangul:"마쓰"},{kanji:"助",kana:"すけ",hangul:"스케"},{kanji:"蔵",kana:"ぞう",hangul:"조"},{kanji:"平",kana:"へい",hangul:"헤이"},{kanji:"忠",kana:"ただ",hangul:"타다"},{kanji:"義",kana:"よし",hangul:"요시"},{kanji:"勇",kana:"いさむ",hangul:"이사무"},{kanji:"武",kana:"たけ",hangul:"타케"},{kanji:"力",kana:"りき",hangul:"리키"},{kanji:"正",kana:"まさ",hangul:"마사"},{kanji:"長",kana:"なが",hangul:"나가"},{kanji:"幸",kana:"ゆき",hangul:"유키"},{kanji:"直",kana:"なお",hangul:"나오"},{kanji:"栄",kana:"えい",hangul:"에이"},{kanji:"光",kana:"みつ",hangul:"미쓰"},{kanji:"竜",kana:"たつ",hangul:"타쓰"},{kanji:"虎",kana:"とら",hangul:"도라"},{kanji:"鷹",kana:"たか",hangul:"타카"},{kanji:"鯉",kana:"こい",hangul:"코이"},{kanji:"勘",kana:"かん",hangul:"칸"}],U=[{kanji:"郎",kana:"ろう",hangul:"로"},{kanji:"助",kana:"すけ",hangul:"스케"},{kanji:"兵衛",kana:"べえ",hangul:"베"},{kanji:"右衛門",kana:"えもん",hangul:"에몬"},{kanji:"吉",kana:"きち",hangul:"기치"},{kanji:"蔵",kana:"ぞう",hangul:"조"},{kanji:"之助",kana:"のすけ",hangul:"노스케"},{kanji:"三郎",kana:"さぶろう",hangul:"사부로"},{kanji:"八",kana:"はち",hangul:"하치"},{kanji:"平",kana:"へい",hangul:"헤이"},{kanji:"秀",kana:"ひで",hangul:"히데"},{kanji:"政",kana:"まさ",hangul:"마사"},{kanji:"恒",kana:"つね",hangul:"쓰네"},{kanji:"高",kana:"たか",hangul:"타카"},{kanji:"登",kana:"のぼる",hangul:"노보루"},{kanji:"盛",kana:"もり",hangul:"모리"},{kanji:"春",kana:"はる",hangul:"하루"},{kanji:"秋",kana:"あき",hangul:"아키"},{kanji:"之丞",kana:"のじょう",hangul:"노조"},{kanji:"弥",kana:"や",hangul:"야"},{kanji:"一馬",kana:"かずま",hangul:"카즈마"},{kanji:"清",kana:"きよ",hangul:"키요"}],$=[{kanji:"一",kana:"いち",hangul:"이치"},{kanji:"二",kana:"じ",hangul:"지"},{kanji:"三",kana:"さん",hangul:"산"},{kanji:"四",kana:"し",hangul:"시"},{kanji:"五",kana:"ご",hangul:"고"},{kanji:"六",kana:"ろく",hangul:"로쿠"},{kanji:"七",kana:"しち",hangul:"시치"},{kanji:"八",kana:"はち",hangul:"하치"},{kanji:"九",kana:"く",hangul:"쿠"},{kanji:"十",kana:"じゅう",hangul:"주"}];function O(n){return n[Math.floor(Math.random()*n.length)]}function w(n){const s=n.reduce((a,g)=>a+g.w,0);let i=Math.random()*s;for(const a of n)if((i-=a.w)<=0)return a.v;return n[n.length-1].v}function K(n){return w(n==="female"?[{v:"O_CORE",w:35},{v:"O_CORE_SUFFIX",w:30},{v:"CORE_SUFFIX",w:35}]:[{v:"CORE_SUFFIX",w:25},{v:"O_CORE_SUFFIX",w:20},{v:"O_NUM_SUFFIX",w:20},{v:"O_NUM",w:15},{v:"NUM_SUFFIX",w:20}])}function S(n){return{kanji:n.map(s=>s.kanji).join(""),kana:n.map(s=>s.kana).join(""),hangul:n.map(s=>s.hangul).join("")}}function B(n="female"){const s=K(n);if(n==="female"){const i=O(W),a=O(A);return S(s==="O_CORE"?[O(M),i]:s==="O_CORE_SUFFIX"?[O(M),i,a]:[i,a])}else{const i=O(D),a=O(U),g=O($);switch(s){case"CORE_SUFFIX":return S([i,a]);case"O_CORE_SUFFIX":return S([O(M),i,a]);case"O_NUM_SUFFIX":return S([O(M),g,a]);case"O_NUM":return S([O(M),g]);case"NUM_SUFFIX":return S([g,a])}}}function X(){let n=[],s=1,i=1700,a=1,g=1e3,d=0,p=1,o=!0,u=!0;function m(t){return B(t).hangul}function h(t=null,l=1){return t||(t=Math.random()<.5?"male":"female"),{id:s++,name:m(t),gender:t,age:l,labor:v(t,l)}}function c(t,l=null,r=1){l||(l=Math.random()<.5?"male":"female");const j=B(l);return{id:s++,name:j.hangul,gender:l,age:r,labor:v(l,r)}}function v(t,l){return l<12||l>65?0:2}function _(t){const l=n.findIndex(r=>r.id===t);return l!==-1&&n.splice(l,1)[0]||null}return{id:"village",init(t){var l;if((l=t.state).village??(l.village={people:[],nextId:1,festival:!1,year:1700,turn:1,food:1e3,laborDeficit:0,month:1,allowMaleBirths:!0,allowFemaleBirths:!0}),n=t.state.village.people,s=t.state.village.nextId,i=t.state.village.year,a=t.state.village.turn,g=t.state.village.food,d=t.state.village.laborDeficit,p=t.state.village.month,o=t.state.village.allowMaleBirths,u=t.state.village.allowFemaleBirths,n.length===0){for(let r=0;r<10;r++){const j=Math.floor(Math.random()*50)+15,x=h(null,j);n.push(x)}t.state.village.people=n,t.state.village.nextId=s}},actions:{nextTurn(t,l){const r=[];n.forEach(f=>{p===12&&f.age++,f.labor=v(f.gender,f.age)});const j=n.filter(f=>f.gender==="female"&&f.age>=18&&f.age<=40),x=l.state.village.festival?.1:.03;j.forEach(f=>{if(l.rand.roll(x)){const y=Math.random()<.5?"male":"female";if(y==="male"&&o||y==="female"&&u){const C=c(f.name.split(" ")[0],y);n.push(C),r.push({type:"log",msg:`${f.name}이(가) ${C.name}을(를) 낳았습니다!`})}}});const k=[];n.forEach(f=>{const y=f.age/1e4;l.rand.roll(y)&&k.push(f)}),k.forEach(f=>{const y=n.findIndex(C=>C.id===f.id);y!==-1&&n.splice(y,1),r.push({type:"log",msg:`${f.name}이(가) 세상을 떠났습니다. (${f.age}세)`})}),l.state.village.festival&&(l.state.village.festival=!1);const T=n.length;if(g<T){const f=T-g;for(let y=0;y<f&&n.length>0;y++){const C=Math.floor(Math.random()*n.length),F=n.splice(C,1)[0];F&&r.push({type:"log",msg:`${F.name}이(가) 굶어 죽었습니다.`})}g=0}else g-=T;const P=100,R=n.reduce((f,y)=>f+y.labor,0);if(R<P&&(d+=P-R),p===10){const f=Math.max(0,1200-d);g+=f,d=0,r.push({type:"log",msg:`수확이 완료되었습니다. +${f} 식량`})}return p=p===12?1:p+1,a++,a>12&&(a=1,i++),l.state.village.people=n,l.state.village.nextId=s,l.state.village.year=i,l.state.village.turn=a,l.state.village.food=g,l.state.village.laborDeficit=d,l.state.village.month=p,l.state.village.allowMaleBirths=o,l.state.village.allowFemaleBirths=u,r},exile({personId:t},l){const r=_(t);return r?(l.state.village.people=n,[{type:"log",msg:`${r.name}을(를) 마을에서 추방했습니다.`}]):[{type:"log",msg:"추방할 사람을 찾을 수 없습니다."}]},holdFestival(t,l){return l.state.village.festival=!0,[{type:"log",msg:"축제를 개최했습니다! 출산 확률이 증가합니다."}]},toggleMaleBirths(t,l){return o=!o,l.state.village.allowMaleBirths=o,[{type:"log",msg:`남자아이 출산: ${o?"허용":"금지"}`}]},toggleFemaleBirths(t,l){return u=!u,l.state.village.allowFemaleBirths=u,[{type:"log",msg:`여자아이 출산: ${u?"허용":"금지"}`}]},reset(t,l){i=1700,a=1,g=1e3,d=0,p=1,n=[],s=1,o=!0,u=!0;for(let r=0;r<10;r++){const j=Math.floor(Math.random()*50)+15,x=h(null,j);n.push(x)}return l.state.village.people=n,l.state.village.nextId=s,l.state.village.year=i,l.state.village.turn=a,l.state.village.food=g,l.state.village.laborDeficit=d,l.state.village.month=p,l.state.village.festival=!1,l.state.village.allowMaleBirths=o,l.state.village.allowFemaleBirths=u,[{type:"log",msg:"게임을 리셋했습니다."}]},addFood({amount:t},l){return g+=t,l.state.village.food=g,[{type:"log",msg:`식량 ${t} 추가`}]}},update(t,l){},save(){return{people:n.map(t=>({...t})),nextId:s,year:i,turn:a,food:g,laborDeficit:d,month:p,allowMaleBirths:o,allowFemaleBirths:u}},load(t){t&&(n=t.people||[],s=t.nextId||1,i=t.year||1700,a=t.turn||1,g=t.food||1e3,d=t.laborDeficit||0,p=t.month||1,o=t.allowMaleBirths!==void 0?t.allowMaleBirths:!0,u=t.allowFemaleBirths!==void 0?t.allowFemaleBirths:!0)}}}function N({kernel:n,autoPlay:s,gameSpeed:i}){const a=n.ctx.state.village;if(!a)return e.jsx("div",{children:"로딩 중..."});const g=a.people||[],d=g.reduce((h,c)=>h+c.labor,0),p=g.filter(h=>h.gender==="female"&&h.age>=15&&h.age<=40).length,o=g.filter(h=>h.age<15).length,u=g.filter(h=>h.age>60).length,m=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];return e.jsxs("div",{style:{border:"2px solid #34495e",borderRadius:"8px",padding:"20px",backgroundColor:"#ecf0f1",marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:"0 0 15px 0",color:"#2c3e50"},children:"마을 상태"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:"기본 정보"}),e.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"연도:"})," ",a.year,"년"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"월:"})," ",m[a.turn-1]]}),e.jsxs("div",{children:[e.jsx("strong",{children:"총 인구:"})," ",g.length,"명"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"총 노동력:"})," ",d,"인분"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:"인구 구성"}),e.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"가임기 여성:"})," ",p,"명"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"어린이 (15세 미만):"})," ",o,"명"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"노인 (60세 초과):"})," ",u,"명"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"노동 가능 인구:"})," ",g.length-o-u,"명"]})]})]})]}),e.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#fff",borderRadius:"4px"},children:[e.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:"식량 현황"}),e.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"현재 식량:"})," ",a.food,"개"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"월 소비량:"})," ",g.length,"개"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"노동력 부족:"})," ",a.laborDeficit,"인분"]}),e.jsx("div",{style:{color:a.food<g.length?"#e74c3c":"#27ae60",fontWeight:"bold"},children:a.food<g.length?"⚠️ 식량 부족!":"✅ 식량 충분"})]})]}),a.festival&&e.jsx("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#f39c12",color:"white",borderRadius:"4px",textAlign:"center",fontWeight:"bold"},children:"🎉 축제 진행 중! 출산 확률 증가"}),e.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:s?"#27ae60":"#95a5a6",color:"white",borderRadius:"4px",textAlign:"center",fontWeight:"bold"},children:[s?"🔄 자동 진행 중":"⏸️ 일시정지됨",s&&` (${i===1e3?"1x 보통":i===100?"10x 빠름":i===33?"30x 매우 빠름":"100x 초고속"})`]})]})}const H="/nemonori/assets/2025-08-13_00075_-B28ohnct.jpg",L=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),q="/nemonori/assets/2025-08-13_00076_-C2PEqnjU.jpg",G=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"})),Q="/nemonori/assets/2025-08-13_00081_-Dsy-ldUy.jpg",Y=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),V="/nemonori/assets/2025-08-13_00088_-BW8jwbZ7.jpg",Z=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"})),J="/nemonori/assets/2025-08-13_00089_-D-d2kzD1.jpg",ee=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),ne="/nemonori/assets/2025-08-13_00050_-DJR3CHH6.jpg",te=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),oe="/nemonori/assets/2025-08-13_00051_-lnpuWhXq.jpg",le=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"})),ae="/nemonori/assets/2025-08-13_00052_-BjR2eDyp.jpg",re=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"})),ie="/nemonori/assets/2025-08-13_00053_-DB0p0vQU.jpg",se=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),ge="/nemonori/assets/2025-08-13_00054_-OEDqAO-a.jpg",_e=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"})),ce="/nemonori/assets/2025-08-13_00055_-B7VRisCC.jpg",de=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"})),ue="/nemonori/assets/2025-08-13_00056_-CsBmnecW.jpg",pe=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),fe="/nemonori/assets/2025-08-13_00057_-DHRmvI41.jpg",je=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),he="/nemonori/assets/2025-08-13_00058_-D92EvgCR.jpg",me=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"})),be="/nemonori/assets/2025-08-13_00059_-D57OsbTj.jpg",xe=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"})),ke="/nemonori/assets/2025-08-13_00060_-IFwclxHR.jpg",ye=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"})),ve="/nemonori/assets/2025-08-13_00061_-DslnoDoV.jpg",Oe=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"})),Se="/nemonori/assets/2025-08-13_00062_-D08PWGaD.jpg",Ce=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),Me="/nemonori/assets/2025-08-13_00063_-IpQWDEuF.jpg",Te=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"})),ze="/nemonori/assets/2025-08-13_00064_-ycqgLnlf.jpg",Pe=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"})),Re="/nemonori/assets/2025-08-13_00065_-CMXInUHK.jpg",Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),we="/nemonori/assets/2025-08-13_00066_-DcS4OYOU.jpg",Be=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),Ie="/nemonori/assets/2025-08-13_00067_-CGiTirho.jpg",Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"})),We="/nemonori/assets/2025-08-13_00068_-CPYshIB3.jpg",Ae=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"})),De="/nemonori/assets/2025-08-13_00069_-Cjw3i65m.jpg",Ue=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"})),$e="/nemonori/assets/2025-08-13_00070_-FB69Ohh-.jpg",Ke=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"})),Xe="/nemonori/assets/2025-08-13_00071_-xWQhWTfV.jpg",Ne=Object.freeze(Object.defineProperty({__proto__:null,default:Xe},Symbol.toStringTag,{value:"Module"})),He="/nemonori/assets/2025-08-13_00072_-B2wJktBs.jpg",Le=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"})),qe="/nemonori/assets/2025-08-13_00073_-fGho_QQ2.jpg",Ge=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"})),Qe="/nemonori/assets/2025-08-13_00074_-CJiqGcsh.jpg",Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"})),Ve="/nemonori/assets/2025-08-13_00077_-DeFjwSkW.jpg",Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"})),Je="/nemonori/assets/2025-08-13_00078_-hO8jZgbg.jpg",en=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),nn="/nemonori/assets/2025-08-13_00079_-ECjOwd3z.jpg",tn=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),on="/nemonori/assets/2025-08-13_00080_-ClraitSR.jpg",ln=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),an="/nemonori/assets/2025-08-13_00082_-BqLQbDhR.jpg",rn=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),sn="/nemonori/assets/2025-08-13_00083_-DIpW02zZ.jpg",gn=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),_n="/nemonori/assets/2025-08-13_00084_-Cf5z0qHW.jpg",cn=Object.freeze(Object.defineProperty({__proto__:null,default:_n},Symbol.toStringTag,{value:"Module"})),dn="/nemonori/assets/2025-08-13_00085_-CKOXG9Zm.jpg",un=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"})),pn="/nemonori/assets/2025-08-13_00087_-Bq3rg1Bf.jpg",fn=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"})),jn="/nemonori/assets/2025-08-13_00091_-CcGjxWbd.jpg",hn=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),mn="/nemonori/assets/2025-08-13_00093_-CogC2_u7.jpg",bn=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),xn="/nemonori/assets/2025-08-13_00037_-C4KKPtC6.jpg",kn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),yn="/nemonori/assets/2025-08-13_00038_-D41k4fNp.jpg",vn=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),On="/nemonori/assets/2025-08-13_00039_-C5xI7rD9.jpg",Sn=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"})),Cn="/nemonori/assets/2025-08-13_00040_-0sf-oWcM.jpg",Mn=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"})),Tn="/nemonori/assets/2025-08-13_00041_-X42O97hK.jpg",zn=Object.freeze(Object.defineProperty({__proto__:null,default:Tn},Symbol.toStringTag,{value:"Module"})),Pn="/nemonori/assets/2025-08-13_00042_-B3zs8tSn.jpg",Rn=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),Fn="/nemonori/assets/2025-08-13_00043_-2YpN1l2s.jpg",wn=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),Bn="/nemonori/assets/2025-08-13_00044_-B3BlxxX_.jpg",In=Object.freeze(Object.defineProperty({__proto__:null,default:Bn},Symbol.toStringTag,{value:"Module"})),En="/nemonori/assets/2025-08-13_00045_-OWz8xbpt.jpg",Wn=Object.freeze(Object.defineProperty({__proto__:null,default:En},Symbol.toStringTag,{value:"Module"})),An="/nemonori/assets/2025-08-13_00046_-aGqFoQYD.jpg",Dn=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),Un="/nemonori/assets/2025-08-13_00047_-D-0K6AcX.jpg",$n=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"})),Kn="/nemonori/assets/2025-08-13_00048_-CYQ0ix10.jpg",Xn=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"})),Nn="/nemonori/assets/2025-08-13_00049_-Dcng7QTS.jpg",Hn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"}));function Ln({people:n,onExile:s}){const[i,a]=b.useState(null),[g,d]=b.useState(!1),p=b.useMemo(()=>{const t=Object.assign({"../../images/boy/2025-08-13_00075_.jpg":L,"../../images/boy/2025-08-13_00076_.jpg":G,"../../images/boy/2025-08-13_00081_.jpg":Y,"../../images/boy/2025-08-13_00088_.jpg":Z,"../../images/boy/2025-08-13_00089_.jpg":ee,"../../images/female/2025-08-13_00050_.jpg":te,"../../images/female/2025-08-13_00051_.jpg":le,"../../images/female/2025-08-13_00052_.jpg":re,"../../images/female/2025-08-13_00053_.jpg":se,"../../images/female/2025-08-13_00054_.jpg":_e,"../../images/female/2025-08-13_00055_.jpg":de,"../../images/female/2025-08-13_00056_.jpg":pe,"../../images/female/2025-08-13_00057_.jpg":je,"../../images/female/2025-08-13_00058_.jpg":me,"../../images/female/2025-08-13_00059_.jpg":xe,"../../images/female/2025-08-13_00060_.jpg":ye,"../../images/female/2025-08-13_00061_.jpg":Oe,"../../images/female/2025-08-13_00062_.jpg":Ce,"../../images/female/2025-08-13_00063_.jpg":Te,"../../images/female/2025-08-13_00064_.jpg":Pe,"../../images/female/2025-08-13_00065_.jpg":Fe,"../../images/female/2025-08-13_00066_.jpg":Be,"../../images/female/2025-08-13_00067_.jpg":Ee,"../../images/female/2025-08-13_00068_.jpg":Ae,"../../images/female/2025-08-13_00069_.jpg":Ue,"../../images/female/2025-08-13_00070_.jpg":Ke,"../../images/female/2025-08-13_00071_.jpg":Ne,"../../images/female/2025-08-13_00072_.jpg":Le,"../../images/girl/2025-08-13_00073_.jpg":Ge,"../../images/girl/2025-08-13_00074_.jpg":Ye,"../../images/girl/2025-08-13_00077_.jpg":Ze,"../../images/girl/2025-08-13_00078_.jpg":en,"../../images/girl/2025-08-13_00079_.jpg":tn,"../../images/girl/2025-08-13_00080_.jpg":ln,"../../images/girl/2025-08-13_00082_.jpg":rn,"../../images/girl/2025-08-13_00083_.jpg":gn,"../../images/girl/2025-08-13_00084_.jpg":cn,"../../images/girl/2025-08-13_00085_.jpg":un,"../../images/girl/2025-08-13_00087_.jpg":fn,"../../images/girl/2025-08-13_00091_.jpg":hn,"../../images/girl/2025-08-13_00093_.jpg":bn,"../../images/male/2025-08-13_00037_.jpg":kn,"../../images/male/2025-08-13_00038_.jpg":vn,"../../images/male/2025-08-13_00039_.jpg":Sn,"../../images/male/2025-08-13_00040_.jpg":Mn,"../../images/male/2025-08-13_00041_.jpg":zn,"../../images/male/2025-08-13_00042_.jpg":Rn,"../../images/male/2025-08-13_00043_.jpg":wn,"../../images/male/2025-08-13_00044_.jpg":In,"../../images/male/2025-08-13_00045_.jpg":Wn,"../../images/male/2025-08-13_00046_.jpg":Dn,"../../images/male/2025-08-13_00047_.jpg":$n,"../../images/male/2025-08-13_00048_.jpg":Xn,"../../images/male/2025-08-13_00049_.jpg":Hn}),l={male:[],female:[],boy:[],girl:[]};return Object.keys(t).forEach(r=>{const j=r.split("/").pop(),x=t[r].default;r.includes("/male/")?l.male.push({fileName:j,url:x}):r.includes("/female/")?l.female.push({fileName:j,url:x}):r.includes("/boy/")?l.boy.push({fileName:j,url:x}):r.includes("/girl/")&&l.girl.push({fileName:j,url:x})}),l},[]),o=t=>{const r=t.age>=12?t.gender==="male"?"male":"female":t.gender==="male"?"boy":"girl",j=p[r]||[];if(j.length===0)return null;const x=t.id%j.length;return j[x].url},u=t=>{const{gender:l,age:r}=t;return r>65?"rgba(192, 192, 192, 0.7)":r>=12?l==="male"?"rgba(44, 62, 80, 0.7)":"rgba(149, 165, 166, 0.7)":l==="male"?"rgba(135, 206, 235, 0.7)":"rgba(255, 182, 193, 0.7)"},m=t=>{const{gender:l,age:r}=t;return r>65?"#2c3e50":r>=12&&l==="male"?"#ffffff":"#2c3e50"},h=(t,l)=>{s(t)},c=t=>{a(t),d(!0)},v=()=>{d(!1),a(null)},_=()=>{i&&(s(i.id),v())};return e.jsxs("div",{style:{border:"2px solid #34495e",borderRadius:"8px",padding:"20px",backgroundColor:"#ecf0f1"},children:[e.jsxs("h2",{style:{margin:"0 0 15px 0",color:"#2c3e50"},children:["마을 사람들 (",n.length,"명)"]}),n.length===0?e.jsx("div",{style:{textAlign:"center",color:"#7f8c8d",padding:"20px"},children:"마을에 사람이 없습니다."}):e.jsx("div",{style:{height:"632px",minHeight:"400px",overflowY:"auto",border:"1px solid #bdc3c7",borderRadius:"4px",backgroundColor:"white",padding:"15px"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(90px, 1fr))",gap:"6px",alignItems:"start"},children:n.map(t=>{const l=o(t);return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"6px 4px",border:`2px solid ${t.labor>0?"#27ae60":"#e74c3c"}`,borderRadius:"6px",backgroundColor:u(t),color:m(t),cursor:"pointer",transition:"all 0.2s",position:"relative"},onClick:()=>c(t),onMouseOver:r=>{r.target.style.transform="scale(1.05)",r.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)"},onMouseOut:r=>{r.target.style.transform="scale(1)",r.target.style.boxShadow="none"},children:[e.jsxs("div",{style:{width:"40px",height:"40px",marginBottom:"3px",borderRadius:"50%",overflow:"hidden",border:"2px solid #bdc3c7",filter:t.labor===0?"grayscale(50%)":"none"},children:[l?e.jsx("img",{src:l,alt:`${t.name}의 초상화`,style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="block"}}):null,e.jsx("div",{style:{display:l?"none":"flex",width:"100%",height:"100%",fontSize:"20px",alignItems:"center",justifyContent:"center",backgroundColor:"#ecf0f1"},children:t.gender==="male"?"👨":"👩"})]}),e.jsx("div",{style:{fontWeight:"bold",color:m(t),fontSize:"11px",textAlign:"center",marginBottom:"2px",lineHeight:"1.1"},children:t.name}),e.jsxs("div",{style:{color:m(t),fontSize:"10px",marginBottom:"2px"},children:[t.age,"세"]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),h(t.id,t.name)},style:{backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"3px",padding:"2px 4px",fontSize:"9px",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},onMouseOver:r=>r.target.style.backgroundColor="#c0392b",onMouseOut:r=>r.target.style.backgroundColor="#e74c3c",children:"추방"})]},t.id)})})}),e.jsxs("div",{style:{marginTop:"15px",fontSize:"11px",color:"#7f8c8d",textAlign:"center",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"💡 노동력: 남성 2인분, 여성 2인분 (12-65세만)"}),e.jsx("span",{children:"💡 여성 가임기: 18-40세"}),e.jsxs("span",{children:["📊 총 ",n.length,"명"]})]}),g&&i&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:v,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"30px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",position:"relative"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:v,style:{position:"absolute",top:"15px",right:"20px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"×"}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"120px",height:"120px",margin:"0 auto 20px",borderRadius:"50%",overflow:"hidden",border:"4px solid #bdc3c7",filter:i.labor===0?"grayscale(50%)":"none"},children:o(i)?e.jsx("img",{src:o(i),alt:`${i.name}의 초상화`,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:"100%",fontSize:"60px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ecf0f1"},children:i.gender==="male"?"👨":"👩"})}),e.jsx("h2",{style:{margin:"0 0 10px 0",color:"#2c3e50",fontSize:"24px"},children:i.name}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"25px",textAlign:"left"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"나이:"})," ",i.age,"세"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"성별:"})," ",i.gender==="male"?"남성":"여성"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"노동력:"})," ",i.labor>0?`${i.labor}인분`:"노동 불가"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"노동 가능:"})," ",i.labor>0?"✅":"❌"]})]}),e.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"25px",textAlign:"left"},children:[e.jsx("h3",{style:{margin:"0 0 10px 0",color:"#2c3e50"},children:"나이대별 정보"}),i.age<12&&e.jsx("p",{style:{margin:0,color:"#666"},children:"어린이입니다. 아직 노동에 참여할 수 없습니다."}),i.age>=12&&i.age<15&&e.jsx("p",{style:{margin:0,color:"#666"},children:"청소년입니다. 아직 노동에 참여할 수 없습니다."}),i.age>=15&&i.age<=65&&e.jsx("p",{style:{margin:0,color:"#666"},children:"성인입니다. 노동에 참여할 수 있습니다."}),i.age>65&&e.jsx("p",{style:{margin:0,color:"#666"},children:"노인입니다. 노동에 참여할 수 없습니다."})]}),e.jsx("button",{onClick:_,style:{backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"6px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",transition:"background-color 0.2s",width:"100%"},onMouseOver:t=>t.target.style.backgroundColor="#c0392b",onMouseOut:t=>t.target.style.backgroundColor="#e74c3c",children:"마을에서 추방하기"})]})]})})]})}function qn({onNextTurn:n,onFestival:s,onReset:i,autoPlay:a,onToggleAutoPlay:g,gameSpeed:d,onSpeedChange:p,allowMaleBirths:o,allowFemaleBirths:u,onToggleMaleBirths:m,onToggleFemaleBirths:h}){return e.jsxs("div",{style:{border:"2px solid #34495e",borderRadius:"8px",padding:"20px",backgroundColor:"#ecf0f1"},children:[e.jsx("h2",{style:{margin:"0 0 15px 0",color:"#2c3e50"},children:"게임 컨트롤"}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",marginBottom:"15px"},children:[e.jsx("button",{onClick:n,style:{backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"6px",padding:"12px 20px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",flex:"1",minWidth:"120px"},onMouseOver:c=>c.target.style.backgroundColor="#2980b9",onMouseOut:c=>c.target.style.backgroundColor="#3498db",children:"⏭️ 다음 턴"}),e.jsx("button",{onClick:s,style:{backgroundColor:"#f39c12",color:"white",border:"none",borderRadius:"6px",padding:"12px 20px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",flex:"1",minWidth:"120px"},onMouseOver:c=>c.target.style.backgroundColor="#e67e22",onMouseOut:c=>c.target.style.backgroundColor="#f39c12",children:"🎉 축제 개최"}),e.jsx("button",{onClick:i,style:{backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"6px",padding:"12px 20px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",flex:"1",minWidth:"120px"},onMouseOver:c=>c.target.style.backgroundColor="#c0392b",onMouseOut:c=>c.target.style.backgroundColor="#e74c3c",children:"🔄 게임 리셋"})]}),e.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"15px",alignItems:"center",flexDirection:"row"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexShrink:0},children:[e.jsx("button",{onClick:g,style:{backgroundColor:a?"#27ae60":"#95a5a6",color:"white",border:"none",borderRadius:"6px",padding:"10px 15px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",minWidth:"100px"},onMouseOver:c=>c.target.style.backgroundColor=a?"#229954":"#7f8c8d",onMouseOut:c=>c.target.style.backgroundColor=a?"#27ae60":"#95a5a6",children:a?"⏸️ 일시정지":"▶️ 자동진행"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"bold",color:"#2c3e50"},children:"속도:"}),e.jsxs("select",{value:d,onChange:c=>p(Number(c.target.value)),style:{padding:"8px",borderRadius:"4px",border:"1px solid #bdc3c7",fontSize:"14px",backgroundColor:"white"},children:[e.jsx("option",{value:1e3,children:"1x 보통"}),e.jsx("option",{value:100,children:"10x 빠름"}),e.jsx("option",{value:33,children:"30x 매우 빠름"}),e.jsx("option",{value:10,children:"100x 초고속"})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"#fff",padding:"10px",borderRadius:"6px",border:"1px solid #bdc3c7",flexShrink:0},children:[e.jsx("span",{style:{fontSize:"14px",fontWeight:"bold",color:"#2c3e50"},children:"출산 제어:"}),e.jsx("button",{onClick:m,style:{backgroundColor:o?"#27ae60":"#e74c3c",color:"white",border:"none",borderRadius:"4px",padding:"8px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",minWidth:"80px"},onMouseOver:c=>c.target.style.backgroundColor=o?"#229954":"#c0392b",onMouseOut:c=>c.target.style.backgroundColor=o?"#27ae60":"#e74c3c",children:o?"👶 남자":"🚫 남자"}),e.jsx("button",{onClick:h,style:{backgroundColor:u?"#27ae60":"#e74c3c",color:"white",border:"none",borderRadius:"4px",padding:"8px 12px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.2s",minWidth:"80px"},onMouseOver:c=>c.target.style.backgroundColor=u?"#229954":"#c0392b",onMouseOut:c=>c.target.style.backgroundColor=u?"#27ae60":"#e74c3c",children:u?"👶 여자":"🚫 여자"})]}),"      "]}),e.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#fff",borderRadius:"4px",fontSize:"12px",color:"#7f8c8d"},children:[e.jsx("div",{style:{marginBottom:"5px"},children:e.jsx("strong",{children:"게임 규칙:"})}),e.jsx("div",{children:"• 1턴 = 1개월, 1년 = 12턴"}),e.jsx("div",{children:"• 식량: 인구 1명당 월 1개 소비"}),e.jsx("div",{children:"• 농사: 월 100인분 노동력 필요, 10월 수확"}),e.jsx("div",{children:"• 출산: 가임기 여성 월 3% (축제 시 10%)"}),e.jsx("div",{children:"• 사망: 나이/10000 확률로 자연사"}),e.jsx("div",{style:{marginTop:"5px",color:"#e74c3c"},children:"• 출산 제어: 토글 버튼으로 남자/여자 아기 출산을 선택적으로 제어할 수 있습니다"})]})]})}function Gn({logs:n}){const s=b.useRef(null),[i,a]=b.useState(!0),g=()=>{if(s.current){const o=s.current;o.scrollTop=o.scrollHeight,a(!0)}},d=()=>{if(s.current){const{scrollTop:o,scrollHeight:u,clientHeight:m}=s.current,h=Math.abs(u-m-o)<10;a(h)}};b.useEffect(()=>{n&&n.length>0&&g()},[n==null?void 0:n.length]);const p=o=>o.includes("낳았습니다")?"👶":o.includes("세상을 떠났습니다")||o.includes("굶어 죽었습니다")?"💀":o.includes("추방했습니다")?"🚪":o.includes("축제")?"🎉":o.includes("수확")?"🌾":o.includes("년")&&o.includes("월")?"📅":"📝";return e.jsxs("div",{style:{border:"2px solid #34495e",borderRadius:"8px",padding:"20px",backgroundColor:"#ecf0f1",marginTop:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsxs("h2",{style:{margin:0,color:"#2c3e50"},children:["게임 로그 (",n.length,"개)"]}),e.jsx("button",{onClick:g,style:{backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",padding:"5px 10px",fontSize:"12px",cursor:"pointer"},children:"🔽 맨 아래로"})]}),e.jsx("div",{ref:s,onScroll:d,style:{height:"200px",overflowY:"auto",border:"1px solid #bdc3c7",borderRadius:"4px",backgroundColor:"white",padding:"10px",fontFamily:"monospace",fontSize:"12px"},children:n.length===0?e.jsx("div",{style:{textAlign:"center",color:"#7f8c8d",padding:"20px"},children:"아직 로그가 없습니다."}):n.map((o,u)=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"5px",padding:"3px 0",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("span",{style:{fontSize:"14px"},children:p(o.msg)}),e.jsx("span",{style:{color:o.msg.includes("죽었습니다")||o.msg.includes("추방")?"#e74c3c":o.msg.includes("낳았습니다")||o.msg.includes("축제")?"#27ae60":o.msg.includes("수확")?"#f39c12":"#2c3e50"},children:o.msg})]},u))}),e.jsxs("div",{style:{marginTop:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"11px",color:"#7f8c8d"},children:[e.jsxs("span",{children:["💡 ",i?"자동 스크롤 활성화":"자동 스크롤 비활성화 (위로 스크롤됨)"]}),!i&&e.jsx("button",{onClick:g,style:{backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"10px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:o=>o.target.style.backgroundColor="#2980b9",onMouseOut:o=>o.target.style.backgroundColor="#3498db",children:"맨 아래로"})]})]})}const I=({data:n,width:s=800,height:i=400,title:a,series:g})=>{const d=b.useRef(null);return b.useEffect(()=>{const o=d.current.getContext("2d");if(o.clearRect(0,0,s,i),!n||!n.population||n.population.length===0){o.strokeStyle="#e0e0e0",o.lineWidth=1;for(let _=0;_<=4;_++){const t=(i-20)*(_/4)+10;o.beginPath(),o.moveTo(40,t),o.lineTo(s-10,t),o.stroke()}o.fillStyle="#999",o.font="14px Arial",o.textAlign="center",o.fillText("데이터가 없습니다",s/2,i/2);return}const u=g.map(_=>_.dataKey==="food"?n[_.dataKey].map(t=>t.value/100):n[_.dataKey].map(t=>t.value)).flat(),m=Math.max(...u,1);o.strokeStyle="#e0e0e0",o.lineWidth=1;for(let _=0;_<=4;_++){const t=(i-20)*(_/4)+10;o.beginPath(),o.moveTo(40,t),o.lineTo(s-10,t),o.stroke()}o.fillStyle="#666",o.font="12px Arial",o.textAlign="right";for(let _=0;_<=4;_++){const t=Math.round(m*(4-_)/4),l=(i-20)*(_/4)+15;o.fillText(t,35,l)}o.textAlign="center";const h=Math.max(1,Math.floor(n.population.length/5));for(let _=0;_<n.population.length;_+=h){const t=40+_/(n.population.length-1)*(s-50);o.fillText(n.population[_].label,t,i-5)}const c=g.map(_=>({label:_.name,color:_.color}));o.font="12px Arial",c.forEach((_,t)=>{const l=s-200,r=20+t*20;o.fillStyle=_.color,o.fillRect(l,r-8,12,12),o.fillStyle="#333",o.textAlign="left",o.fillText(_.label,l+18,r)}),g.map(_=>({data:_.dataKey==="food"?n[_.dataKey].map(t=>({...t,value:t.value/100})):n[_.dataKey],color:_.color,name:_.name})).forEach(_=>{!_.data||_.data.length===0||(o.strokeStyle=_.color,o.lineWidth=2,o.beginPath(),_.data.forEach((t,l)=>{const r=40+l/(_.data.length-1)*(s-50),j=i-20-t.value/m*(i-40)+10;l===0?o.moveTo(r,j):o.lineTo(r,j)}),o.stroke(),o.fillStyle=_.color,_.data.forEach((t,l)=>{const r=40+l/(_.data.length-1)*(s-50),j=i-20-t.value/m*(i-40)+10;o.beginPath(),o.arc(r,j,3,0,2*Math.PI),o.fill()}))})},[n,s,i]),e.jsxs("div",{style:{margin:"10px 0"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",textAlign:"center"},children:a}),e.jsx("canvas",{ref:d,width:s,height:i,style:{border:"1px solid #ddd",borderRadius:"4px"}})]})},Qn=({villageState:n})=>{const[s,i]=b.useState({population:[],labor:[],food:[],fertileWomen:[],fertileWomenRatio:[],maleChildrenRatio:[],femaleChildrenRatio:[]});return b.useEffect(()=>{if(!n)return;n.turn;const a=n.year;n.month===12&&i(d=>({population:[...d.population,{label:`${a}년`,value:n.people.length}].slice(-100),labor:[...d.labor,{label:`${a}년`,value:n.people.reduce((o,u)=>o+u.labor,0)}].slice(-100),food:[...d.food,{label:`${a}년`,value:n.food}].slice(-100),fertileWomen:[...d.fertileWomen,{label:`${a}년`,value:n.people.filter(o=>o.gender==="female"&&o.age>=18&&o.age<=39).length}].slice(-100),fertileWomenRatio:[...d.fertileWomenRatio,{label:`${a}년`,value:n.people.length>0?(n.people.filter(o=>o.gender==="female"&&o.age>=18&&o.age<=39).length/n.people.length*100).toFixed(1):0}].slice(-100),maleChildrenRatio:[...d.maleChildrenRatio,{label:`${a}년`,value:n.people.length>0?(n.people.filter(o=>o.gender==="male"&&o.age<15).length/n.people.length*100).toFixed(1):0}].slice(-100),femaleChildrenRatio:[...d.femaleChildrenRatio,{label:`${a}년`,value:n.people.length>0?(n.people.filter(o=>o.gender==="female"&&o.age<15).length/n.people.length*100).toFixed(1):0}].slice(-100)}))},[n.year,n.month,n.people.length,n.food]),n?(n.people.length,n.people.filter(a=>a.age>=15&&a.age<=65).length,n.people.filter(a=>a.age<15).length,n.people.filter(a=>a.age>65).length,n.people.reduce((a,g)=>a+g.labor,0),e.jsx("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",margin:"10px 0"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e.jsx(I,{data:s,title:"📈 마을 변화 통합 차트",width:500,height:350,series:[{dataKey:"population",color:"#4CAF50",name:"인구"},{dataKey:"labor",color:"#2196F3",name:"노동력"},{dataKey:"food",color:"#FF9800",name:"식량/100"}]}),e.jsx(I,{data:s,title:"📊 인구 비율 변화 차트",width:500,height:350,series:[{dataKey:"fertileWomenRatio",color:"#E91E63",name:"가임기여성비율(%)"},{dataKey:"maleChildrenRatio",color:"#2196F3",name:"남자어린이비율(%)"},{dataKey:"femaleChildrenRatio",color:"#FF9800",name:"여자어린이비율(%)"}]})]})})):null};function Zn(){var r,j,x;const[n,s]=b.useState(null),[i,a]=b.useState(0),[g,d]=b.useState(!0),[p,o]=b.useState(1e3);if(b.useEffect(()=>{const k=E("village-sim-seed",[X()]);s(k)},[]),b.useEffect(()=>{if(!n)return;const k=()=>a(z=>z+1);return n.ctx.bus.on("effects.applied",k),()=>{n.ctx.bus.off("effects.applied",k)}},[n]),b.useEffect(()=>{if(!n||!g)return;const k=setInterval(()=>{n.dispatch("village","nextTurn")},p);return()=>clearInterval(k)},[n,g,p]),!n)return e.jsx("div",{children:"로딩 중..."});const u=()=>{n.dispatch("village","nextTurn")},m=k=>{n.dispatch("village","exile",{personId:k})},h=()=>{n.dispatch("village","holdFestival")},c=()=>{n.dispatch("village","reset")},v=()=>{n.dispatch("village","toggleMaleBirths")},_=()=>{n.dispatch("village","toggleFemaleBirths")},t=()=>{d(!g)},l=k=>{o(k)};return e.jsxs("div",{className:"app",style:{maxWidth:"1200px",margin:"0 auto",padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx("h1",{style:{textAlign:"center",color:"#2c3e50"},children:"에도 시대 농촌 마을 시뮬레이션"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx(N,{kernel:n,autoPlay:g,gameSpeed:p}),e.jsx(qn,{onNextTurn:u,onFestival:h,onReset:c,autoPlay:g,onToggleAutoPlay:t,gameSpeed:p,onSpeedChange:l,allowMaleBirths:((r=n.ctx.state.village)==null?void 0:r.allowMaleBirths)??!0,allowFemaleBirths:((j=n.ctx.state.village)==null?void 0:j.allowFemaleBirths)??!0,onToggleMaleBirths:v,onToggleFemaleBirths:_})]}),e.jsx("div",{children:e.jsx(Ln,{people:((x=n.ctx.state.village)==null?void 0:x.people)||[],onExile:m})})]}),e.jsx(Qn,{villageState:n.ctx.state.village}),e.jsx(Gn,{logs:n.ctx.log})]})}export{Zn as default};
